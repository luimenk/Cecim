<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Panel de Administración</title>
    <th:block th:include="/dependences/_HeadInside"></th:block>
    <link href="../assets/css/estiloPanelFirma.css" rel="stylesheet" />
</head>
<body>
<!--<body>-->
<div class="wrapper">
    <th:block th:include="/dependences/sidebar/_sidebarAdmin"></th:block>
    <div class="main-panel">
        <th:block th:include="/dependences/_Header"></th:block>
        <!--Contenido de página-->
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card ">
                            <div class="card-header ">
                                <h4 class="card-title">Registro de análisis de determinación compuestos por
                                    termogravimetría</h4>
                            </div>
                            <div class="card-body ">

                                <div class="row">
                                    <label class="col-sm-2 control-label">Folio del método</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="folioTecnica" id="folioTecnica"
                                                   th:value="${folioTecnica}" disabled>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Folio de solicitud de servicio interno</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="folioSolicitudServicioInterno"
                                                   id="folioSolicitudServicioInterno"
                                                   th:value="${folioSolicitudServicioInterno}" disabled>
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Fecha inicio de análisis</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="fechaInicioAnalisis" id="fechaInicioAnalisis"
                                                   th:value="${fechaHoy}" required="true">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">ID Interno de muestra</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="idInternoMuestra" id="idInternoMuestra"
                                                   th:value="${idInternoMuestra}" disabled>
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Fecha final de análisis</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="fechaFinalAnalisis" id="fechaFinalAnalisis" required="true">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Temperatura</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <select class="selectpicker" name="temperatura" id="temperatura" required
                                                    data-title="Selecciona una opción..."
                                                    data-style="btn-info"
                                                    data-menu-style="dropdown-blue">
                                                <option value="21.0">21.0</option>
                                                <option value="21.1">21.1</option>
                                                <option value="21.2">21.2</option>
                                                <option value="21.3">21.3</option>
                                                <option value="21.4">21.4</option>
                                                <option value="21.5">21.5</option>
                                                <option value="21.6">21.6</option>
                                                <option value="21.7">21.7</option>
                                                <option value="21.8">21.8</option>
                                                <option value="21.9">21.9</option>
                                                <option value="22.0">22.0</option>
                                                <option value="22.1">22.1</option>
                                                <option value="22.2">22.2</option>
                                                <option value="22.3">22.3</option>
                                                <option value="22.4">22.4</option>
                                                <option value="22.5">22.5</option>
                                                <option value="22.6">22.6</option>
                                                <option value="22.7">22.7</option>
                                                <option value="22.8">22.8</option>
                                                <option value="22.9">22.9</option>
                                                <option value="23.0">23.0</option>
                                                <option value="23.1">23.1</option>
                                                <option value="23.2">23.2</option>
                                                <option value="23.3">23.3</option>
                                                <option value="23.4">23.4</option>
                                                <option value="23.5">23.5</option>
                                                <option value="23.6">23.6</option>
                                                <option value="23.7">23.7</option>
                                                <option value="23.8">23.8</option>
                                                <option value="23.9">23.9</option>
                                                <option value="24.0">24.0</option>
                                                <option value="24.1">24.1</option>
                                                <option value="24.2">24.2</option>
                                                <option value="24.3">24.3</option>
                                                <option value="24.4">24.4</option>
                                                <option value="24.5">24.5</option>
                                                <option value="24.6">24.6</option>
                                                <option value="24.7">24.7</option>
                                                <option value="24.8">24.8</option>
                                                <option value="24.9">24.9</option>
                                                <option value="25.0">25.0</option>
                                            </select>
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Humedad relativa</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <select class="selectpicker" name="humedadRelativa" id="humedadRelativa"
                                                    required
                                                    data-title="Selecciona una opción..."
                                                    data-style="btn-info"
                                                    data-menu-style="dropdown-blue">
                                                <option value="40">40</option>
                                                <option value="41">41</option>
                                                <option value="42">42</option>
                                                <option value="43">43</option>
                                                <option value="44">44</option>
                                                <option value="45">45</option>
                                                <option value="46">46</option>
                                                <option value="47">47</option>
                                                <option value="48">48</option>
                                                <option value="49">49</option>
                                                <option value="50">50</option>
                                                <option value="51">51</option>
                                                <option value="52">52</option>
                                                <option value="53">53</option>
                                                <option value="54">54</option>
                                                <option value="55">55</option>
                                                <option value="56">56</option>
                                                <option value="57">57</option>
                                                <option value="58">58</option>
                                                <option value="59">59</option>
                                                <option value="60">60</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Código de TGA</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="codigoTGA" id="codigoTGA"
                                                   value="TGA-01" disabled>
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Código de la balanza</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="codigoBalanza" id="codigoBalanza"
                                                   value="BALA-02" disabled>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="card-footer ">
                                <h6 class="text-danger">* Favor de verificar tu información.</h6>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Condiciones de ensayo</h4>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <label class="col-sm-2 control-label">Gas de prueba Atm de N<sub>2</sub></label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="gasPrueba" id="gasPrueba">
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Gas protección Atm de N<sub>2</sub></label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="gasProteccion" id="gasProteccion">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Peso (mg)</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="peso" id="peso">
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Posición portador muestra</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="posicionPortadorMuestra" id="posicionPortadorMuestra">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Tipo de material</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <select class="selectpicker" name="tipoMaterial" id="tipoMaterial"
                                                    data-title="Selecciona una opción..."
                                                    data-style="btn-primary"
                                                    data-menu-style="dropdown-blue" onchange="setearResultados()">
                                                <option value="Elastómeros">Elastómeros</option>
                                                <option value="Termoplásticos">Termoplásticos</option>
                                                <option value="Termofijos">Termofijos</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <h6 class="text-danger">* Favor de verificar tu información.</h6>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                            </div>
                            <div class="card-body" style="overflow-x: scroll">
                                <div class="row">
                                    <table class="table table-hover table-striped">
                                        <thead>
                                        <tr>
                                            <th class="text-center">Etapa</th>
                                            <th class="text-center" colspan="2">Temperatura (°C)</th>
                                            <th class="text-center">Tiempo (min)</th>
                                            <th class="text-center">Tipo de atmósfera</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="text-center">Purga</td>
                                            <td class="text-center" colspan="2"><input type="text" class="form-control"
                                                                                       name="purga" id="purga"></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="tiempoPurga" id="tiempoPurga"></td>
                                            <td class="text-center">N<sub>2</sub></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Inicio-Dinámica<sub>cal1</sub></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="inicio" id="inicio"></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="dinamicaCal1" id="dinamicaCal1"
                                                                            onchange="setearEnA()"></td>
                                            <td class="text-center" rowspan="2">NA</td>
                                            <td class="text-center"><select class="selectpicker" name="tipoAtmosfera1"
                                                                            id="tipoAtmosfera1"
                                                                            data-style="btn-primary"
                                                                            data-menu-style="dropdown-blue">
                                                                        <option value="O2">O<sub>2</sub></option>
                                                                        <option value="N2">N<sub>2</sub></option>
                                                                    </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Dinámica<sub>cal1</sub>-Dinámica<sub>cal2</sub></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="a" id="a" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="dinamicaCal2" id="dinamicaCal2"
                                                                            onchange="setearEnB()"></td>
                                            <td class="text-center"><select class="selectpicker" name="tipoAtmosfera2"
                                                                            id="tipoAtmosfera2"
                                                                            data-style="btn-primary"
                                                                            data-menu-style="dropdown-blue">
                                                <option value="O2">O<sub>2</sub></option>
                                                <option value="N2">N<sub>2</sub></option>
                                            </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Tasa de calentamiento</td>
                                            <td class="text-center" colspan="3"><input type="text" class="form-control"
                                                                                       name="tasaCalentamiento" id="tasaCalentamiento"></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Dinámica<sub>cal2</sub>-Dinámica<sub>enf1</sub></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="b" id="b" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="dinamicaEnf1" id="dinamicaEnf1"></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="dinamica" id="dinamica"></td>
                                            <td class="text-center">N<sub>2</sub></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Tasa de enfriamiento</td>
                                            <td class="text-center" colspan="3"><input type="text" class="form-control"
                                                                                       name="tasaEnfriamiento" id="tasaEnfriamiento"></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Temperatura de emergencia</td>
                                            <td class="text-center" colspan="3"><input type="text" class="form-control"
                                                                                       name="temperaturaEmergencia" id="temperaturaEmergencia"></td>
                                            <td class="text-center">N/A</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <h6 class="text-danger">* Favor de verificar tu información.</h6>
                            </div>
                        </div>


                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Resultados</h4>
                            </div>
                            <div class="card-body" style="overflow-x: scroll">
                                <div class="row">
                                    <table class="table table-hover table-striped">
                                        <thead>
                                        <tr>
                                            <th class="text-center">Compuesto</th>
                                            <th class="text-center">Rango de temperatura (°C)</th>
                                            <th class="text-center">Concentración de compuesto (% en peso)</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="text-center">Material altamente volátil</td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="avTemperatura"
                                                                           id="avTemperatura" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="avPeso" id="avPeso"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Material volátil</td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="mvTemperatura"
                                                                           id="mvTemperatura" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="mvPeso" id="mvPeso"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Combustible</td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="combustibleTemperatura"
                                                                           id="combustibleTemperatura" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="combustiblePeso" id="combustiblePeso"></td>
                                        </tr>
                                        <tr>
                                            <td class="text-center">Contenido de cenizas</td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="cenizasTemperatura"
                                                                           id="cenizasTemperatura" disabled></td>
                                            <td class="text-center"><input type="text" class="form-control"
                                                                           name="cenizasPeso" id="cenizasPeso"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <h6 class="text-danger">* Favor de verificar tu información.</h6>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Observaciones</h4>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <label class="col-sm-2 control-label">Evidencia</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="file" id="file" accept="image/*" onchange="mostrar()"/>
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Vista previa</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <img id="img" style="width: 320px; height: 240px;"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <label class="col-sm-2 control-label">Observaciones</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="observaciones" id="observaciones" required="true">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label">Realizó</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="realizo" id="realizo" required="true">
                                        </div>
                                    </div>
                                    <label class="col-sm-2 control-label">Supervisó</label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <div class="form-group">
                                            <input type="text" class="form-control"
                                                   name="supervisor" id="supervisor" required="true">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label"></label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>Panel de firma</button>
                                    </div>
                                </div>

                                <!--MODAL-->
                                <div class="modal fade" id="myModal" role="dialog">
                                    <div class="modal-dialog">

                                        <!-- Modal content-->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <canvas id="sig-canvas" width="320" height="240">
                                                        Usa un navegador diferente
                                                    </canvas>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-auto mr-auto ml-auto">
                                                        <button class="btn btn-primary" id="sig-submitBtn" data-dismiss="modal"><i class="fa fa-check-circle"></i>Aceptar firma</button>
                                                        <button class="btn btn-default" id="sig-clearBtn"><i class="fa fa-eraser"></i>Limpiar firma</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label"></label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <textarea id="sig-dataUrl" class="form-control" rows="5" hidden>Metadato</textarea>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="col-sm-2 control-label"></label>
                                    <div class="col-sm-4 col-sm-offset-1">
                                        <img id="sig-image" src="" alt=""/>
                                    </div>
                                </div>

                            </div>
                            <div class="card-footer">
                                <button type="submit" id="btnAceptar" class="btn btn-fill btn-success" onclick="valida()">
                                    <span class="btn-label">
                                        <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                    </span>
                                    Registrar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <th:block th:include="/dependences/_Footer"></th:block>
    </div>
</div>
</body>
<script src="../assets/js/actions/base64aBlob.js" type="text/javascript"></script>
<script src="../assets/js/actions/signature.js" type="text/javascript"></script>
<script src="../assets/js/actions/metodoFRATGA.js" type="text/javascript"></script>
<th:block th:include="/dependences/_RequiredScripts"></th:block>
<script>
    $('#fechaInicioAnalisis').datetimepicker({
        format: 'YYYY-MM-DD',
        sideBySide: true,
        icons: {
            up: "fa fa-chevron-circle-up",
            down: "fa fa-chevron-circle-down",
            next: 'fa fa-chevron-circle-right',
            previous: 'fa fa-chevron-circle-left'
        }
    });
    $('#fechaFinalAnalisis').datetimepicker({
        format: 'YYYY-MM-DD',
        sideBySide: true,
        icons: {
            up: "fa fa-chevron-circle-up",
            down: "fa fa-chevron-circle-down",
            next: 'fa fa-chevron-circle-right',
            previous: 'fa fa-chevron-circle-left'
        }
    });

    function setearResultados(){
        let condicional = document.getElementById("tipoMaterial").value;
        if (condicional === "Elastómeros") {
            document.getElementById("avTemperatura").value = "Tamb – 325";
            document.getElementById("mvTemperatura").value = "325 – 550";
            document.getElementById("combustibleTemperatura").value = "550 - 750";
            document.getElementById("cenizasTemperatura").value = "> 750";
        }
        if (condicional === "Termoplásticos") {
            document.getElementById("avTemperatura").value = "Tamb – 200";
            document.getElementById("mvTemperatura").value = "200 - 600";
            document.getElementById("combustibleTemperatura").value = "600 - 750";
            document.getElementById("cenizasTemperatura").value = "> 750";
        }
        if (condicional === "Termofijos") {
            document.getElementById("avTemperatura").value = "Tamb – 200";
            document.getElementById("mvTemperatura").value = "200 - 550";
            document.getElementById("combustibleTemperatura").value = "550 – 750";
            document.getElementById("cenizasTemperatura").value = "> 750";
        }
    }

    function setearEnA(){
        let dinamicaA = document.getElementById("dinamicaCal1").value;
        document.getElementById("a").value = dinamicaA;
    }

    function setearEnB(){
        let dinamicaB = document.getElementById("dinamicaCal2").value;
        document.getElementById("b").value = dinamicaB;
    }
</script>
</html>